# MANUAL

## Installation
Run the below command to add vuewrapper to project

```sh
npm install vuewrapper -save
```

## Usage

You can import the component in main.js

```sh
import WRAPPER from 'vuewrapper'
const app=createApp(App)
app.use(WRAPPER)
```

Then ComWrap can be used anywhere

Or  import when needed

```sh
import {CompWrap} from 'vuewrapper'
```

## Configuration

### General

We highly recommand to go through all the demo first and then read this manual.
The below introduction are based on element plus. But this project can work with other component library as well.
The structure config file is as below.

```sh

{sys:{},
props:{},
slots:{},
events:{},
styles:{},
styles:{},
classes:[]
}

```

### sys

The sys element has following properties:
|property       | description  |
|  ----         | ----  |
| component     | The base component. It can be a string(if it is already registerd) or imported component. The value is bind to component with [is attribute](https://vuejs.org/api/built-in-special-attributes.html#is).|
| modelValue    | Refer to below v-model  |
| modelValuePath| Refer to below v-model  |

#### v-model

If the base component has no v-model( for example e-row/el-col), then modelValue is not necessary to set.
There are three methods to set v-model

1. v-model is defined by a variable,just set the modelValue to that variable.  Refer to demo 'Concept' -  configInput2.

```sh
    const valueInput = ref("InitValue");

    modelValue: valueInput,
```

2. A wriable computed -  [vue3 manual](https://vuejs.org/guide/essentials/computed.html#writable-computed)

```sh
const valueInput = ref("InitValue");
//The below code equal to modelValue: valueInput,  just to demo how to use computed
modelValue: computed({
    get() {
    return valueInput.value
    },
    set(value) {
    valueInput.value=value
    }
}),
```

3. modelValue + modelValuePath, the typical use case is form. The form item value is a subset of form value.
Refer to demo 'Form' - formConfig1

```sh
sys: {
    component: "ElInput",
    //Use modelValuePath config modelValue
    modelValue: formValue,
    modelValuePath:'address',
},
```

Please note in the above example, set modelValue:formValue.address does NOT work.

### props

The idea to use [v-bind](https://vuejs.org/api/built-in-directives.html#v-bind) to bind all the props to component.

### slots

#### Structure

The structure of slots is as below

```sh
{slot1:slot define 1,
slot2:slot define 2,
...
}
```

#### Slot define

A slot define can be a JSON / shortcut / JSON array. JSON is the standard format of slot define which will be described later. Shortcut is kind of simplified configuration. The element of the JSON array can be JSON or shortcut.
Shotcut cane the following types, they will be convert to standard JSON format automatically.

* If slot define is a String, it will be convert to {type:'text',value:'xyz'} xyz is String of slot define.
* If slot define is a funciton, it will be convert to {type:'function',value:'xyz'} xyz is function of slot define.
* If slot define is a object with no 'type' property, it will be convert to {type:'wrap',value:'xyz'} xyz is  slot define
  
#### Slot define JSON

It has two properties, one is key the other is value. The value is explained by key.
The value can be a array, the element of the array will be explained as the below table as well.

|key       | value  |
|  ----    | ----  |
| text     |{{value}} as vue Mustache syntax|
| html     |Insert as HTML with v-html directive  |
| component|Consider the value is a component,the slot parameter is set to the component property named slotPara  |
| function |Consider the value is function, the function will be evaluated with argment  slot parameter,the result will be inserted as HTML|
| wrap|Refer to slot define as a wrap|
| inherit|Expose the slot to parenet component. The slot name is the value if it is available, otherwise use the original slot name|

#### Slot define as a wrap

The value can be a standard configuration as described in this manual, or it can be funciton and return a standard configuration. The input argument of funtion is slot parameter, so the configuration can be generated by the input parameter.

#### SLot parameter

The slot parameter is a JSON with following properties.

|key       | value  |
|----      | ----  |
|slotDefine|Slot define as desribed above. It can be used to pass customized information from definition.|
|slotValue |The slot parameter  passed to the slot from parent component.|
|modelValue|The modelValue of the component|


### events

The structure of events is a JSON/JS object as below

```sh
{'event1':event handle1,
'event2':event handle2
...
}
```

Event handle can be configed as below. 

1. function
It is a funciton, and function will be called. The function argements are same as the event parameters.
2. JSON , the property 'type' is 'function' and property 'value' is a function.
Execute the function of property 'value'
3. JSON, the property 'type' is 'inherit'
Emit the event to parent component. If the proerty 'value' is available, use it as the event name; otherwise use the orginal event name as the emited event name.

#### Restriction

Event Modifiers is not supported.

### styles

```sh
const myColor = ref("#ffff00");


  styles: {
    backgroundColor: myColor,
    border: "5px solid red",
  },
```

### class

```sh
 classes: ["testClass2"],
```

#### Restriction

The classes should be importedf globally.

### method

The root base component can be called by 'callMethod', refer to demo 'Table'
The first argument is the method name, the other arguments are the argument of the method to be called.

```sh
mainRef1.value.callMethod('clearSelection')
```

#### Restriction

Only the root base component can be called.
A mechenism to call all the base componets is under design.
